# What is IL?

[*This repo assumes a reasonly solid grasp of the C# language*]

IL (Intermediate Language), otherwise known as CIL (Common Intermediate Language) or MSIL (Microsoft Intermediate Language),
is the IR (intermediate representation) used to represent compiled .NET language code. Your average C#, VB.NET, and F# programs
all compiled down to IL in their exe and dlls (there are exceptions to this though ðŸ‘€).

The "traditional" use of a .NET program is with JITting, or Just-In-Time compilation. This is where your code is transformed into native
machine code at runtime, when the method is first called (things like tiered compilation may change this slightly in the future, but it's a good 1000ft view).
Obviously, this must be fast. Your user doesn't want to sit around for 5 minutes while the JIT compiles it on every startup.

So IL must be designed to be fast for compilers to understand and transform, as well as being space efficient to prevent bloated binaries.
The first step to this is the fact IL is bytecode. There is a textual version, which is what we will be writing in the examples, and a tool
called `ilasm` (provided in the main folder, but can also be build from the dotnet/runtime source) to assemble this into the bytecode.
There is very little abstraction between the textual version `ilasm` accepts and the binary it outputs.

IL can broadly be divided into two primary parts. Metadata, and IL instructions. Metadata describes types, fields, attributes, method signatures,
string literals, exception handling blocks, and all the parts of a .NET compilation that aren't the actual executing method. IL instructions are what
the compiler actually turns into native machine code for execution. For example, here's a C# method:

```cs
public static int Mul(int x, int y)
{
    return x * y;
}
```

In IL, the metadata will describe the method signature (as a `MethodDef`) (public, static, called `Mul`, takes two `int32` params) and the EH (no catch/fault/finally)).
If you don't know what a fault is, be patient ðŸ˜‰.
The instructions will be the main method body.

```il
ldarg.0 // push 'x' stack
ldarg.1 // push 'y' to the stack
mul // multiply the top 2 items of the stack, pushing the result of the operation
ret // return
```

If this makes no sense to you right now, don't worry. Soon enough it'll be as clear as english.

[SharpLab](https://sharplab.io) is an invaluable tool for learning and experimenting with IL. You can see the IL generated by the compiler for any
C#, VB, or F# code.